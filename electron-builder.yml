appId: com.devtools.app
productName: DevTools App
copyright: >
  Copyright Â© 2026 DevTools

# Global build optimizations for production
# compression: maximum          # Best compression for installers
compression: normal          # Best compression for installers
asar: true                    # Pack app into asar archive
asarUnpack:
  - '**/*.node'               # Native modules
  - 'resources/bin/**'        # FFmpeg binaries, helpers, etc.

directories:
  output: dist-electron/pack  # All installers/output go here
  buildResources: build

# Files to include in production app
files:
  - 'dist/**'                 # Vite renderer bundle
  - 'dist-electron/**'        # Electron main/preload bundle
  - 'resources/**'            # Extra resources (ffmpeg, plugin registry, etc.)
  - 'package.json'

  # Exclude source, tooling, and heavy dev-only content
  - '!src/**'
  - '!electron/**'
  - '!docs/**'
  - '!debug_scripts/**'
  - '!video/**'
  - '!build/**'
  - '!scripts/**'

  # Generic exclusions to reduce size
  - '!**/*.{ts,tsx,jsx,map,md}'
  - '!**/.{git,github,vscode,idea}'
  - '!**/node_modules/*/{test,tests,__tests__,*.test.*,*.spec.*}'
  - '!**/node_modules/*/{README,LICENSE,CHANGELOG}*'
  - '!**/node_modules/*/*.{md,markdown,txt}'
  - '!**/node_modules/**/{example,examples,demo,demos,doc,docs}'
  - '!**/node_modules/*.d.ts'
  - '!**/node_modules/.bin'
  - '!*.{yml,yaml,log}'
  - '!tmpfs*'

# Windows Configuration (x64)
win:
  target:
    # 1) Standard NSIS installer (.exe)
    - target: nsis
      arch:
        - x64
    # 2) Portable executable (single .exe, no install)
    - target: portable
      arch:
        - x64
    # 3) ZIP archive (portable folder)
    - target: zip
      arch:
        - x64

  icon: public/icon.png
  artifactName: '${productName}-${version}-${arch}.${ext}'
  requestedExecutionLevel: asInvoker
  signAndEditExecutable: false

# NSIS installer
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: always
  createStartMenuShortcut: true
  shortcutName: DevTools App
  deleteAppDataOnUninstall: false
  differentialPackage: true
  artifactName: '${productName}-${version}-Setup-${arch}.${ext}'

# Portable exe
portable:
  artifactName: '${productName}-${version}-Portable-${arch}.${ext}'
  requestExecutionLevel: user

# macOS Configuration
mac:
  target:
    - target: dmg
      arch:
        - universal
  icon: public/icon.png
  category: public.app-category.developer-tools
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  artifactName: '${productName}-${version}-${arch}.${ext}'

dmg:
  title: '${productName} ${version}'
  icon: public/icon.png
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications
  window:
    width: 540
    height: 380
  format: UDZO

# Linux Configuration
linux:
  target:
    - AppImage
  icon: public/icon.png
  category: Development
  synopsis: DevTools App
  description: A comprehensive developer tools application with multiple utilities
