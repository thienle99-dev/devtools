appId: com.devtools.app
productName: DevTools App
copyright: Copyright Â© 2026 DevTools App

# OPTIMIZATION: Maximum compression
compression: maximum
asar: true
asarUnpack:
  - "**/*.node"
  - "**/ffmpeg*"

directories:
  output: dist-electron/pack
  buildResources: build

files:
  - "dist/**/*"
  - "dist-electron/**/*"
  - "package.json"
  # Comprehensive exclusions for smaller build
  - "!**/*.{ts,tsx,jsx,map,md}"
  - "!**/.{git,github,vscode,idea}"
  - "!**/node_modules/*/{test,tests,*.test.*,*.spec.*}"
  - "!**/node_modules/*/{README,LICENSE,CHANGELOG}*"
  - "!**/node_modules/*/*.{md,markdown,txt}"
  - "!**/node_modules/**/{example,examples,demo,demos,doc,docs}"
  - "!node_modules/**/*"
  - "!src/**/*"
  - "!electron/**/*"
  - "!docs/**/*"
  - "!debug_scripts/**/*"
  - "!video/**/*"
  - "!build/**/*"
  - "!scripts/**/*"
  - "!*.{md,yml,yaml,log}"
  - "!*.json"
  - "!tmpfs*"
  - "!dummy"
  - "package.json"

# Windows Configuration (x64 ONLY)
win:
  target:
    - target: nsis
      arch:
        - x64  # Removed ia32 for smaller builds
  icon: public/icon.png
  artifactName: ${productName}-${version}-${arch}.${ext}
  requestedExecutionLevel: asInvoker
  signAndEditExecutable: false

# NSIS Installer Configuration
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: always
  createStartMenuShortcut: true
  shortcutName: DevTools App
  deleteAppDataOnUninstall: false
  differentialPackage: true  # Smaller updates

# macOS Configuration
mac:
  target:
    - target: dmg
      arch:
        - universal  # Universal binary (smaller than separate builds)
  icon: public/icon.png
  category: public.app-category.developer-tools
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  artifactName: ${productName}-${version}.${ext}

# DMG Configuration
dmg:
  title: ${productName} ${version}
  icon: public/icon.png
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications
  window:
    width: 540
    height: 380
  format: UDZO  # Maximum compression

# Linux Configuration
linux:
  target:
    - AppImage
  icon: public/icon.png
  category: Development
  synopsis: Developer Tools Application
  description: A comprehensive developer tools application with multiple utilities
